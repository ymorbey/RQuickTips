<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Sun event times | Quick R Tips &amp; Tricks</title>
  <meta name="description" content="Chapter 3 Sun event times | Quick R Tips &amp; Tricks" />
  <meta name="generator" content="bookdown 0.41 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Sun event times | Quick R Tips &amp; Tricks" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Sun event times | Quick R Tips &amp; Tricks" />
  
  
  

<meta name="author" content="Yolanda Morbey" />


<meta name="date" content="2024-11-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="dates-and-times.html"/>
<link rel="next" href="maps.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">QuickRTips</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a></li>
<li class="chapter" data-level="2" data-path="dates-and-times.html"><a href="dates-and-times.html"><i class="fa fa-check"></i><b>2</b> Dates and times</a></li>
<li class="chapter" data-level="3" data-path="sun-event-times.html"><a href="sun-event-times.html"><i class="fa fa-check"></i><b>3</b> Sun event times</a></li>
<li class="chapter" data-level="4" data-path="maps.html"><a href="maps.html"><i class="fa fa-check"></i><b>4</b> Maps</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Quick R Tips &amp; Tricks</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="sun-event-times" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Sun event times<a href="sun-event-times.html#sun-event-times" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Load libraries</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="sun-event-times.html#cb16-1" tabindex="-1"></a><span class="fu">library</span>(dplyr)      <span class="co"># for data frame manipulation</span></span>
<span id="cb16-2"><a href="sun-event-times.html#cb16-2" tabindex="-1"></a><span class="fu">library</span>(suntools)   <span class="co"># for sunriset, crepuscule</span></span>
<span id="cb16-3"><a href="sun-event-times.html#cb16-3" tabindex="-1"></a><span class="fu">library</span>(lubridate)  <span class="co"># for date and time functions</span></span>
<span id="cb16-4"><a href="sun-event-times.html#cb16-4" tabindex="-1"></a><span class="fu">library</span>(data.table) <span class="co"># for setDT</span></span></code></pre></div>
<p>Functions in suntools provide everthing you need to get sunrise, sunset, and other sun event times. One caveat is that these functions do not seem to perform well in dplyr. Therefore, we will 1) create a new variable using the assignment operator and 2) add the data table format to our data frame and then perform manipulations on the data table.</p>
<p>It’s useful to look at an example before attempting these functions on your own data frame.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="sun-event-times.html#cb17-1" tabindex="-1"></a><span class="co"># see example for sunriset</span></span>
<span id="cb17-2"><a href="sun-event-times.html#cb17-2" tabindex="-1"></a></span>
<span id="cb17-3"><a href="sun-event-times.html#cb17-3" tabindex="-1"></a><span class="fu">example</span>(sunriset)</span></code></pre></div>
<pre><code>## 
## sunrst&gt; #Sunset in Ithaca, NY, USA on June 1, 2023
## sunrst&gt; 
## sunrst&gt; sunriset(
## sunrst+  matrix(c(-76.4511, 42.4800), nrow = 1),
## sunrst+  as.POSIXct(&quot;2023-06-01&quot;, tz = &quot;America/New_York&quot;),
## sunrst+  direction=&#39;sunset&#39;,
## sunrst+  POSIXct.out=TRUE
## sunrst+ )
##   day_frac                time
## 1 0.858628 2023-06-01 20:36:25</code></pre>
<p>Now let’s try suntools functions on a data frame. Be very careful with your time zones!</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="sun-event-times.html#cb19-1" tabindex="-1"></a><span class="co"># make example data frame (df) with dates, lat, and lon</span></span>
<span id="cb19-2"><a href="sun-event-times.html#cb19-2" tabindex="-1"></a>( today <span class="ot">&lt;-</span> <span class="fu">Sys.Date</span>() ) <span class="co"># get today&#39;s date in UTC</span></span></code></pre></div>
<pre><code>## [1] &quot;2024-11-22&quot;</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="sun-event-times.html#cb21-1" tabindex="-1"></a><span class="co"># create a data frame with dates, and convert time to tz</span></span>
<span id="cb21-2"><a href="sun-event-times.html#cb21-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">date=</span><span class="fu">as.POSIXct</span>(<span class="fu">seq</span>(today,today<span class="sc">+</span><span class="dv">10</span>,<span class="at">by=</span><span class="dv">1</span>),<span class="at">tz=</span><span class="st">&quot;EST&quot;</span>),</span>
<span id="cb21-3"><a href="sun-event-times.html#cb21-3" tabindex="-1"></a>                 <span class="at">lat=</span><span class="dv">42</span>,</span>
<span id="cb21-4"><a href="sun-event-times.html#cb21-4" tabindex="-1"></a>                 <span class="at">lon=</span><span class="sc">-</span><span class="dv">80</span>)</span>
<span id="cb21-5"><a href="sun-event-times.html#cb21-5" tabindex="-1"></a></span>
<span id="cb21-6"><a href="sun-event-times.html#cb21-6" tabindex="-1"></a><span class="co"># put lat and lon into a matrix</span></span>
<span id="cb21-7"><a href="sun-event-times.html#cb21-7" tabindex="-1"></a>coords <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(df<span class="sc">$</span>lon,df<span class="sc">$</span>lat),<span class="at">nrow=</span><span class="fu">nrow</span>(df))</span>
<span id="cb21-8"><a href="sun-event-times.html#cb21-8" tabindex="-1"></a></span>
<span id="cb21-9"><a href="sun-event-times.html#cb21-9" tabindex="-1"></a><span class="co"># get sunrise in tz of df$date</span></span>
<span id="cb21-10"><a href="sun-event-times.html#cb21-10" tabindex="-1"></a><span class="co"># here we are using the assignment operator, not dplyr functions</span></span>
<span id="cb21-11"><a href="sun-event-times.html#cb21-11" tabindex="-1"></a>df<span class="sc">$</span>sunrise <span class="ot">&lt;-</span> <span class="fu">sunriset</span>(</span>
<span id="cb21-12"><a href="sun-event-times.html#cb21-12" tabindex="-1"></a>  coords,</span>
<span id="cb21-13"><a href="sun-event-times.html#cb21-13" tabindex="-1"></a>  df<span class="sc">$</span>date,</span>
<span id="cb21-14"><a href="sun-event-times.html#cb21-14" tabindex="-1"></a>  <span class="at">direction =</span> <span class="fu">c</span>(<span class="st">&quot;sunrise&quot;</span>),</span>
<span id="cb21-15"><a href="sun-event-times.html#cb21-15" tabindex="-1"></a>  <span class="at">POSIXct.out =</span> <span class="cn">TRUE</span></span>
<span id="cb21-16"><a href="sun-event-times.html#cb21-16" tabindex="-1"></a>)<span class="sc">$</span>time</span>
<span id="cb21-17"><a href="sun-event-times.html#cb21-17" tabindex="-1"></a></span>
<span id="cb21-18"><a href="sun-event-times.html#cb21-18" tabindex="-1"></a><span class="co"># confirm that the tz is correct</span></span>
<span id="cb21-19"><a href="sun-event-times.html#cb21-19" tabindex="-1"></a>df<span class="sc">$</span>sunrise[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span></code></pre></div>
<pre><code>## [1] &quot;2024-11-21 07:17:48 EST&quot; &quot;2024-11-22 07:18:59 EST&quot;
## [3] &quot;2024-11-23 07:20:09 EST&quot; &quot;2024-11-24 07:21:19 EST&quot;
## [5] &quot;2024-11-25 07:22:27 EST&quot; &quot;2024-11-26 07:23:35 EST&quot;</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="sun-event-times.html#cb23-1" tabindex="-1"></a><span class="co"># get sunset in tz of df$date</span></span>
<span id="cb23-2"><a href="sun-event-times.html#cb23-2" tabindex="-1"></a>df<span class="sc">$</span>sunset <span class="ot">&lt;-</span> <span class="fu">sunriset</span>(</span>
<span id="cb23-3"><a href="sun-event-times.html#cb23-3" tabindex="-1"></a>  coords,</span>
<span id="cb23-4"><a href="sun-event-times.html#cb23-4" tabindex="-1"></a>  df<span class="sc">$</span>date,</span>
<span id="cb23-5"><a href="sun-event-times.html#cb23-5" tabindex="-1"></a>  <span class="at">direction =</span> <span class="fu">c</span>(<span class="st">&quot;sunset&quot;</span>),</span>
<span id="cb23-6"><a href="sun-event-times.html#cb23-6" tabindex="-1"></a>  <span class="at">POSIXct.out =</span> <span class="cn">TRUE</span></span>
<span id="cb23-7"><a href="sun-event-times.html#cb23-7" tabindex="-1"></a>)<span class="sc">$</span>time</span>
<span id="cb23-8"><a href="sun-event-times.html#cb23-8" tabindex="-1"></a>df<span class="sc">$</span>sunset[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span></code></pre></div>
<pre><code>## [1] &quot;2024-11-21 16:53:52 EST&quot; &quot;2024-11-22 16:53:14 EST&quot;
## [3] &quot;2024-11-23 16:52:39 EST&quot; &quot;2024-11-24 16:52:06 EST&quot;
## [5] &quot;2024-11-25 16:51:35 EST&quot; &quot;2024-11-26 16:51:06 EST&quot;</code></pre>
<p>As an alternative, we can add a data table format to the data frame and then use data table (dt) syntax for data manipulations. dt syntax works faster on large data sets.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="sun-event-times.html#cb25-1" tabindex="-1"></a><span class="co"># add dt format to the data frame &amp; check</span></span>
<span id="cb25-2"><a href="sun-event-times.html#cb25-2" tabindex="-1"></a><span class="fu">setDT</span>(df)</span>
<span id="cb25-3"><a href="sun-event-times.html#cb25-3" tabindex="-1"></a><span class="fu">class</span>(df)</span></code></pre></div>
<pre><code>## [1] &quot;data.table&quot; &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="sun-event-times.html#cb27-1" tabindex="-1"></a><span class="co"># sunset in tz of df$date</span></span>
<span id="cb27-2"><a href="sun-event-times.html#cb27-2" tabindex="-1"></a>df[,sunrise1 <span class="sc">:=</span> <span class="fu">sunriset</span>(<span class="fu">matrix</span>(<span class="fu">c</span>(lon, lat),</span>
<span id="cb27-3"><a href="sun-event-times.html#cb27-3" tabindex="-1"></a>                                        <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">byrow =</span> <span class="cn">FALSE</span>), date,</span>
<span id="cb27-4"><a href="sun-event-times.html#cb27-4" tabindex="-1"></a>                                 <span class="at">POSIXct.out=</span>T,</span>
<span id="cb27-5"><a href="sun-event-times.html#cb27-5" tabindex="-1"></a>                                 <span class="at">direction=</span><span class="st">&#39;sunrise&#39;</span>)[<span class="dv">2</span>]][]</span></code></pre></div>
<pre><code>##                    date   lat   lon             sunrise              sunset
##                  &lt;POSc&gt; &lt;num&gt; &lt;num&gt;              &lt;POSc&gt;              &lt;POSc&gt;
##  1: 2024-11-21 19:00:00    42   -80 2024-11-21 07:17:48 2024-11-21 16:53:52
##  2: 2024-11-22 19:00:00    42   -80 2024-11-22 07:18:59 2024-11-22 16:53:14
##  3: 2024-11-23 19:00:00    42   -80 2024-11-23 07:20:09 2024-11-23 16:52:39
##  4: 2024-11-24 19:00:00    42   -80 2024-11-24 07:21:19 2024-11-24 16:52:06
##  5: 2024-11-25 19:00:00    42   -80 2024-11-25 07:22:27 2024-11-25 16:51:35
##  6: 2024-11-26 19:00:00    42   -80 2024-11-26 07:23:35 2024-11-26 16:51:06
##  7: 2024-11-27 19:00:00    42   -80 2024-11-27 07:24:42 2024-11-27 16:50:40
##  8: 2024-11-28 19:00:00    42   -80 2024-11-28 07:25:49 2024-11-28 16:50:16
##  9: 2024-11-29 19:00:00    42   -80 2024-11-29 07:26:54 2024-11-29 16:49:54
## 10: 2024-11-30 19:00:00    42   -80 2024-11-30 07:27:58 2024-11-30 16:49:35
## 11: 2024-12-01 19:00:00    42   -80 2024-12-01 07:29:02 2024-12-01 16:49:18
##                sunrise1
##                  &lt;POSc&gt;
##  1: 2024-11-21 07:17:48
##  2: 2024-11-22 07:18:59
##  3: 2024-11-23 07:20:09
##  4: 2024-11-24 07:21:19
##  5: 2024-11-25 07:22:27
##  6: 2024-11-26 07:23:35
##  7: 2024-11-27 07:24:42
##  8: 2024-11-28 07:25:49
##  9: 2024-11-29 07:26:54
## 10: 2024-11-30 07:27:58
## 11: 2024-12-01 07:29:02</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="sun-event-times.html#cb29-1" tabindex="-1"></a><span class="co"># sunset in tz of df$date</span></span>
<span id="cb29-2"><a href="sun-event-times.html#cb29-2" tabindex="-1"></a>df[,sunset1 <span class="sc">:=</span> <span class="fu">sunriset</span>(<span class="fu">matrix</span>(<span class="fu">c</span>(lon, lat),</span>
<span id="cb29-3"><a href="sun-event-times.html#cb29-3" tabindex="-1"></a>                                <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">byrow =</span> <span class="cn">FALSE</span>), date,</span>
<span id="cb29-4"><a href="sun-event-times.html#cb29-4" tabindex="-1"></a>                         <span class="at">POSIXct.out=</span>T, <span class="at">direction=</span><span class="st">&#39;sunset&#39;</span>)[<span class="dv">2</span>]][]</span></code></pre></div>
<pre><code>##                    date   lat   lon             sunrise              sunset
##                  &lt;POSc&gt; &lt;num&gt; &lt;num&gt;              &lt;POSc&gt;              &lt;POSc&gt;
##  1: 2024-11-21 19:00:00    42   -80 2024-11-21 07:17:48 2024-11-21 16:53:52
##  2: 2024-11-22 19:00:00    42   -80 2024-11-22 07:18:59 2024-11-22 16:53:14
##  3: 2024-11-23 19:00:00    42   -80 2024-11-23 07:20:09 2024-11-23 16:52:39
##  4: 2024-11-24 19:00:00    42   -80 2024-11-24 07:21:19 2024-11-24 16:52:06
##  5: 2024-11-25 19:00:00    42   -80 2024-11-25 07:22:27 2024-11-25 16:51:35
##  6: 2024-11-26 19:00:00    42   -80 2024-11-26 07:23:35 2024-11-26 16:51:06
##  7: 2024-11-27 19:00:00    42   -80 2024-11-27 07:24:42 2024-11-27 16:50:40
##  8: 2024-11-28 19:00:00    42   -80 2024-11-28 07:25:49 2024-11-28 16:50:16
##  9: 2024-11-29 19:00:00    42   -80 2024-11-29 07:26:54 2024-11-29 16:49:54
## 10: 2024-11-30 19:00:00    42   -80 2024-11-30 07:27:58 2024-11-30 16:49:35
## 11: 2024-12-01 19:00:00    42   -80 2024-12-01 07:29:02 2024-12-01 16:49:18
##                sunrise1             sunset1
##                  &lt;POSc&gt;              &lt;POSc&gt;
##  1: 2024-11-21 07:17:48 2024-11-21 16:53:52
##  2: 2024-11-22 07:18:59 2024-11-22 16:53:14
##  3: 2024-11-23 07:20:09 2024-11-23 16:52:39
##  4: 2024-11-24 07:21:19 2024-11-24 16:52:06
##  5: 2024-11-25 07:22:27 2024-11-25 16:51:35
##  6: 2024-11-26 07:23:35 2024-11-26 16:51:06
##  7: 2024-11-27 07:24:42 2024-11-27 16:50:40
##  8: 2024-11-28 07:25:49 2024-11-28 16:50:16
##  9: 2024-11-29 07:26:54 2024-11-29 16:49:54
## 10: 2024-11-30 07:27:58 2024-11-30 16:49:35
## 11: 2024-12-01 07:29:02 2024-12-01 16:49:18</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="sun-event-times.html#cb31-1" tabindex="-1"></a><span class="co"># confirm these are correct</span></span>
<span id="cb31-2"><a href="sun-event-times.html#cb31-2" tabindex="-1"></a>df<span class="sc">$</span>sunrise1[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span></code></pre></div>
<pre><code>## [1] &quot;2024-11-21 07:17:48 EST&quot; &quot;2024-11-22 07:18:59 EST&quot;
## [3] &quot;2024-11-23 07:20:09 EST&quot; &quot;2024-11-24 07:21:19 EST&quot;
## [5] &quot;2024-11-25 07:22:27 EST&quot; &quot;2024-11-26 07:23:35 EST&quot;</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="sun-event-times.html#cb33-1" tabindex="-1"></a>df<span class="sc">$</span>sunset1[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span></code></pre></div>
<pre><code>## [1] &quot;2024-11-21 16:53:52 EST&quot; &quot;2024-11-22 16:53:14 EST&quot;
## [3] &quot;2024-11-23 16:52:39 EST&quot; &quot;2024-11-24 16:52:06 EST&quot;
## [5] &quot;2024-11-25 16:51:35 EST&quot; &quot;2024-11-26 16:51:06 EST&quot;</code></pre>
<p>Now let’s get crepuscular times:</p>
<ul>
<li>civil twilight: sun is 6 degrees below horizon</li>
<li>nautical twilight: sun is 12 degrees below horizon</li>
<li>astonomical twilight: sun is 18 degrees below horizon</li>
</ul>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="sun-event-times.html#cb35-1" tabindex="-1"></a><span class="co"># astronomical twilight at dawn</span></span>
<span id="cb35-2"><a href="sun-event-times.html#cb35-2" tabindex="-1"></a></span>
<span id="cb35-3"><a href="sun-event-times.html#cb35-3" tabindex="-1"></a>df<span class="sc">$</span>dawn <span class="ot">=</span> <span class="fu">crepuscule</span>(</span>
<span id="cb35-4"><a href="sun-event-times.html#cb35-4" tabindex="-1"></a>  coords,</span>
<span id="cb35-5"><a href="sun-event-times.html#cb35-5" tabindex="-1"></a>  df<span class="sc">$</span>date,</span>
<span id="cb35-6"><a href="sun-event-times.html#cb35-6" tabindex="-1"></a>  <span class="at">solarDep=</span><span class="dv">18</span>,</span>
<span id="cb35-7"><a href="sun-event-times.html#cb35-7" tabindex="-1"></a>  <span class="at">direction =</span> <span class="fu">c</span>(<span class="st">&quot;dawn&quot;</span>),</span>
<span id="cb35-8"><a href="sun-event-times.html#cb35-8" tabindex="-1"></a>  <span class="at">POSIXct.out =</span> <span class="cn">TRUE</span></span>
<span id="cb35-9"><a href="sun-event-times.html#cb35-9" tabindex="-1"></a>)<span class="sc">$</span>time</span>
<span id="cb35-10"><a href="sun-event-times.html#cb35-10" tabindex="-1"></a></span>
<span id="cb35-11"><a href="sun-event-times.html#cb35-11" tabindex="-1"></a><span class="co"># astronomical twilight at dusk</span></span>
<span id="cb35-12"><a href="sun-event-times.html#cb35-12" tabindex="-1"></a>df<span class="sc">$</span>dusk <span class="ot">=</span> <span class="fu">crepuscule</span>(</span>
<span id="cb35-13"><a href="sun-event-times.html#cb35-13" tabindex="-1"></a>  coords,</span>
<span id="cb35-14"><a href="sun-event-times.html#cb35-14" tabindex="-1"></a>  df<span class="sc">$</span>date,</span>
<span id="cb35-15"><a href="sun-event-times.html#cb35-15" tabindex="-1"></a>  <span class="at">solarDep=</span><span class="dv">18</span>,</span>
<span id="cb35-16"><a href="sun-event-times.html#cb35-16" tabindex="-1"></a>  <span class="at">direction =</span> <span class="fu">c</span>(<span class="st">&quot;dusk&quot;</span>),</span>
<span id="cb35-17"><a href="sun-event-times.html#cb35-17" tabindex="-1"></a>  <span class="at">POSIXct.out =</span> <span class="cn">TRUE</span></span>
<span id="cb35-18"><a href="sun-event-times.html#cb35-18" tabindex="-1"></a>)<span class="sc">$</span>time</span>
<span id="cb35-19"><a href="sun-event-times.html#cb35-19" tabindex="-1"></a></span>
<span id="cb35-20"><a href="sun-event-times.html#cb35-20" tabindex="-1"></a>df<span class="sc">$</span>dawn[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>] <span class="co"># confirm tz</span></span></code></pre></div>
<pre><code>## [1] &quot;2024-11-21 05:39:53 EST&quot; &quot;2024-11-22 05:40:53 EST&quot;
## [3] &quot;2024-11-23 05:41:53 EST&quot; &quot;2024-11-24 05:42:53 EST&quot;
## [5] &quot;2024-11-25 05:43:51 EST&quot; &quot;2024-11-26 05:44:50 EST&quot;</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="sun-event-times.html#cb37-1" tabindex="-1"></a>df<span class="sc">$</span>dusk[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span></code></pre></div>
<pre><code>## [1] &quot;2024-11-21 18:31:51 EST&quot; &quot;2024-11-22 18:31:24 EST&quot;
## [3] &quot;2024-11-23 18:30:59 EST&quot; &quot;2024-11-24 18:30:36 EST&quot;
## [5] &quot;2024-11-25 18:30:15 EST&quot; &quot;2024-11-26 18:29:56 EST&quot;</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="sun-event-times.html#cb39-1" tabindex="-1"></a><span class="co"># keep variables of interest and view</span></span>
<span id="cb39-2"><a href="sun-event-times.html#cb39-2" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb39-3"><a href="sun-event-times.html#cb39-3" tabindex="-1"></a>  <span class="fu">select</span>(date,lat,lon,sunrise,sunset,dawn,dusk)</span>
<span id="cb39-4"><a href="sun-event-times.html#cb39-4" tabindex="-1"></a></span>
<span id="cb39-5"><a href="sun-event-times.html#cb39-5" tabindex="-1"></a><span class="fu">head</span>(df1)</span></code></pre></div>
<pre><code>##                   date   lat   lon             sunrise              sunset
##                 &lt;POSc&gt; &lt;num&gt; &lt;num&gt;              &lt;POSc&gt;              &lt;POSc&gt;
## 1: 2024-11-21 19:00:00    42   -80 2024-11-21 07:17:48 2024-11-21 16:53:52
## 2: 2024-11-22 19:00:00    42   -80 2024-11-22 07:18:59 2024-11-22 16:53:14
## 3: 2024-11-23 19:00:00    42   -80 2024-11-23 07:20:09 2024-11-23 16:52:39
## 4: 2024-11-24 19:00:00    42   -80 2024-11-24 07:21:19 2024-11-24 16:52:06
## 5: 2024-11-25 19:00:00    42   -80 2024-11-25 07:22:27 2024-11-25 16:51:35
## 6: 2024-11-26 19:00:00    42   -80 2024-11-26 07:23:35 2024-11-26 16:51:06
##                   dawn                dusk
##                 &lt;POSc&gt;              &lt;POSc&gt;
## 1: 2024-11-21 05:39:53 2024-11-21 18:31:51
## 2: 2024-11-22 05:40:53 2024-11-22 18:31:24
## 3: 2024-11-23 05:41:53 2024-11-23 18:30:59
## 4: 2024-11-24 05:42:53 2024-11-24 18:30:36
## 5: 2024-11-25 05:43:51 2024-11-25 18:30:15
## 6: 2024-11-26 05:44:50 2024-11-26 18:29:56</code></pre>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="dates-and-times.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="maps.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ymorbey/RQuickTips/edit/main/03-suntimes.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ymorbey/RQuickTips/blob/main/03-suntimes.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
